<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ìŠ¤í‚¬ ê³„ì‚°ê¸°</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #121212;
      color: #eee;
      padding: 20px;
    }
    input {
      margin: 5px 0;
      padding: 5px;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      margin: 10px 5px;
      padding: 10px;
      font-weight: bold;
    }
    .section {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>ğŸ“Š ìŠ¤í‚¬ ê³„ì‚°ê¸°</h1>

  <div class="section">
    <label>ê¸°ì´ˆê³µê²©ë ¥: <input type="number" id="baseAtk" /></label><br />
    <label>ê¹¡ê³µ: <input type="number" id="flatAtk" /></label><br />
    <label>ê³µê²©ë ¥%: <input type="number" id="atkPercent" /></label><br />
    <label>ê¸°ì´ˆìŠ¤í‚¬ë°ë¯¸ì§€%: <input type="number" id="baseSkill" /></label><br />
    <label>ì¶”ê°€ìŠ¤í‚¬ë°ë¯¸ì§€%: <input type="number" id="bonusSkill" /></label><br />
    <label>ì¹˜í™•%: <input type="number" id="critRate" /></label><br />
    <label>ì¹˜ëª…íƒ€í”¼í•´%: <input type="number" id="critDmg" /></label><br />
    <label>ì €ì£¼%: <input type="number" id="curse" /></label><br />
    <label>ê°ì „%: <input type="number" id="shock" /></label><br />
    <label>ì¶”ê°€í”¼í•´%: <input type="number" id="bonus" /></label><br />
    <label>ê¸°ë³¸ ê¸°ìˆ  í”¼í•´ëŸ‰ ì¦ê°€%: <input type="number" id="baseSkillBonus" /></label><br />
    <label>ì ì¤‘ì‹œ í”¼í•´: <input type="number" id="onHit" /></label><br />
  </div>

  <div class="section">
    <button onclick="calculate()">ìŠ¤í‚¬ í”¼í•´ ê³„ì‚°</button>
    <button onclick="calculateBasicSkill()">ê¸°ë³¸ ê¸°ìˆ  ê³„ì‚°</button>
    <button onclick="compareEfficiency()">íš¨ìœ¨ ë¹„êµ</button>
  </div>

  <div class="section">
    <p id="result">ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
  </div>

  <script>
    function toNumber(value, defaultValue = 1) {
      const num = parseFloat(value);
      return isNaN(num) ? defaultValue : num;
    }

    function toNumberAdd(value, defaultValue = 0) {
      const num = parseFloat(value);
      return isNaN(num) ? defaultValue : num;
    }

    function getValues() {
      return {
        baseAtk: toNumberAdd(document.getElementById("baseAtk").value),
        flatAtk: toNumberAdd(document.getElementById("flatAtk").value),
        atkPercent: toNumber(document.getElementById("atkPercent").value),
        baseSkill: toNumber(document.getElementById("baseSkill").value),
        bonusSkill: toNumber(document.getElementById("bonusSkill").value),
        critRate: toNumber(document.getElementById("critRate").value),
        critDmg: toNumber(document.getElementById("critDmg").value),
        curse: toNumber(document.getElementById("curse").value),
        shock: toNumber(document.getElementById("shock").value),
        bonus: toNumber(document.getElementById("bonus").value),
        baseSkillBonus: toNumber(document.getElementById("baseSkillBonus").value),
        onHit: toNumberAdd(document.getElementById("onHit").value)
      };
    }

    function calculate() {
      const v = getValues();
      const brand = 1.2;
      const dmg =
        (((v.baseAtk + v.flatAtk) * (1 + v.atkPercent)) *
         (v.baseSkill + v.bonusSkill) *
         (1 + v.critRate) *
         (2 + v.critDmg)) *
        brand *
        (1 + v.curse) *
        (1 + v.shock) *
        (1 + v.bonus) +
        v.onHit;

      document.getElementById("result").innerText = `ìŠ¤í‚¬ í”¼í•´: ${Math.round(dmg)}`;
    }

    function calculateBasicSkill() {
      const v = getValues();
      const brand = 1.2;
      const dmg =
        (((v.baseAtk + v.flatAtk) * (1 + v.atkPercent)) *
         (v.baseSkill + v.bonusSkill) *
         (1 + v.critRate) *
         (2 + v.critDmg)) *
        (1 + v.baseSkillBonus) *
        brand *
        (1 + v.curse) *
        (1 + v.shock) *
        (1 + v.bonus) +
        v.onHit;

      document.getElementById("result").innerText = `ê¸°ë³¸ ê¸°ìˆ  í”¼í•´: ${Math.round(dmg)}`;
    }

    function compareEfficiency() {
      const newValue = prompt("ğŸ” ì¶”ê°€ë˜ëŠ” ê°’(ì˜ˆ: ìƒˆ ìŠ¤í‚¬ í”¼í•´ëŸ‰)ì„ ì…ë ¥í•˜ì„¸ìš”:");
      const currentValue = prompt("ğŸ“Œ í˜„ì¬ ê°’(ì˜ˆ: ê¸°ì¡´ í”¼í•´ëŸ‰)ì„ ì…ë ¥í•˜ì„¸ìš”:");
      const newNum = parseFloat(newValue);
      const currNum = parseFloat(currentValue);

      if (!isNaN(newNum) && !isNaN(currNum) && currNum !== 0) {
        const result = newNum / currNum;
        document.getElementById("result").innerText = `íš¨ìœ¨: ${result.toFixed(3)}ë°° (${(result * 100).toFixed(1)}%)`;
      } else {
        document.getElementById("result").innerText = `âŒ ì˜¬ë°”ë¥¸ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.`;
      }
    }
  </script>
</body>
</html>
